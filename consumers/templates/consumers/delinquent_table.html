<!-- Delinquent Consumers Table - Tailwind CSS -->
<div class="overflow-x-auto rounded-lg border border-light-300 shadow-sm">
    <table class="w-full text-sm">
        <!-- Table Header -->
        <thead class="bg-gradient-to-r from-danger-600 to-danger-700 text-white">
            <tr>
                <th class="px-4 py-3 text-left font-semibold">
                    <div class="flex items-center gap-2">
                        <i class="bi bi-hash"></i>
                        ID Number
                    </div>
                </th>
                <th class="px-4 py-3 text-left font-semibold">
                    <div class="flex items-center gap-2">
                        <i class="bi bi-person"></i>
                        Consumer
                    </div>
                </th>
                <th class="px-4 py-3 text-left font-semibold">
                    <div class="flex items-center gap-2">
                        <i class="bi bi-telephone"></i>
                        Phone
                    </div>
                </th>
                <th class="px-4 py-3 text-right font-semibold">
                    <div class="flex items-center justify-end gap-2">
                        <i class="bi bi-currency-dollar"></i>
                        Total Due
                    </div>
                </th>
                <th class="px-4 py-3 text-center font-semibold">
                    <div class="flex items-center justify-center gap-2">
                        <i class="bi bi-calendar-x"></i>
                        Overdue
                    </div>
                </th>
            </tr>
        </thead>

        <!-- Table Body -->
        <tbody class="bg-white divide-y divide-light-200">
            {% for consumer in delinquent_data %}
            <tr class="hover:bg-danger-50 transition-colors duration-150">
                <td class="px-4 py-3">
                    <span class="font-mono font-semibold text-primary-700">
                        {{ consumer.id_number|default:"—" }}
                    </span>
                </td>
                <td class="px-4 py-3">
                    <div class="font-medium text-dark-900">
                        {{ consumer.first_name }} {{ consumer.last_name }}
                    </div>
                </td>
                <td class="px-4 py-3">
                    <div class="flex items-center gap-1 text-dark-600">
                        {% if consumer.phone_number %}
                            <i class="bi bi-phone-fill text-xs text-success-600"></i>
                            <span>{{ consumer.phone_number }}</span>
                        {% else %}
                            <span class="text-dark-400 italic">No phone</span>
                        {% endif %}
                    </div>
                </td>
                <td class="px-4 py-3 text-right">
                    <span class="font-bold text-danger-700 text-base">
                        ₱{{ consumer.total_due|floatformat:2 }}
                    </span>
                </td>
                <td class="px-4 py-3 text-center">
                    <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold
                        {% if consumer.overdue_months >= 6 %}bg-danger-100 text-danger-800 border border-danger-300
                        {% elif consumer.overdue_months >= 3 %}bg-warning-100 text-warning-800 border border-warning-300
                        {% else %}bg-yellow-100 text-yellow-800 border border-yellow-300{% endif %}">
                        <i class="bi bi-exclamation-triangle-fill"></i>
                        {{ consumer.overdue_months }} month{{ consumer.overdue_months|pluralize }}
                    </span>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="px-4 py-8 text-center">
                    <div class="flex flex-col items-center gap-2 text-success-600">
                        <i class="bi bi-check-circle-fill text-4xl"></i>
                        <p class="font-semibold text-dark-700">No delinquent accounts found</p>
                        <p class="text-xs text-dark-500">All consumers are up to date with payments</p>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>

        <!-- Table Footer -->
        <tfoot class="bg-dark-800 text-white font-bold">
            <tr>
                <td colspan="3" class="px-4 py-3 text-right">
                    <div class="flex items-center justify-end gap-2">
                        <i class="bi bi-calculator"></i>
                        Total Delinquent Amount:
                    </div>
                </td>
                <td colspan="2" class="px-4 py-3 text-right">
                    <span class="text-xl text-danger-300">
                        ₱{{ total_delinquent_amount|floatformat:2 }}
                    </span>
                </td>
            </tr>
        </tfoot>
    </table>
</div>

<!-- Summary Statistics (Optional - if needed) -->
{% if delinquent_data %}
<div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
    <div class="bg-danger-50 border border-danger-200 rounded-lg p-4">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-danger-600 rounded-full flex items-center justify-center">
                <i class="bi bi-people-fill text-white"></i>
            </div>
            <div>
                <p class="text-xs text-dark-600 font-medium">Total Delinquent</p>
                <p class="text-2xl font-bold text-danger-700">{{ delinquent_data|length }}</p>
            </div>
        </div>
    </div>

    <div class="bg-warning-50 border border-warning-200 rounded-lg p-4">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-warning-600 rounded-full flex items-center justify-center">
                <i class="bi bi-currency-dollar text-white"></i>
            </div>
            <div>
                <p class="text-xs text-dark-600 font-medium">Total Amount Due</p>
                <p class="text-2xl font-bold text-warning-700">₱{{ total_delinquent_amount|floatformat:2 }}</p>
            </div>
        </div>
    </div>

    <div class="bg-info-50 border border-info-200 rounded-lg p-4">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-info-600 rounded-full flex items-center justify-center">
                <i class="bi bi-percent text-white"></i>
            </div>
            <div>
                <p class="text-xs text-dark-600 font-medium">Collection Rate</p>
                <p class="text-2xl font-bold text-info-700">
                    {% widthratio delinquent_data|length total_consumers 100 as delinquent_percentage %}
                    {{ delinquent_percentage|default:0 }}%
                </p>
            </div>
        </div>
    </div>
</div>
{% endif %}
