# USER ROLE FLOWCHARTS AND ACCESS CONTROL DIAGRAMS
## Balilihan Waterworks Management System - Thesis Documentation

---

**Document Version:** 1.0
**Date:** November 25, 2025
**Author:** Balilihan Waterworks Development Team
**Purpose:** Comprehensive flowchart documentation for user roles, authentication, and authorization processes

---

## TABLE OF CONTENTS

1. [Flowchart Symbols and Definitions](#1-flowchart-symbols-and-definitions)
2. [User Role Hierarchy](#2-user-role-hierarchy)
3. [Authentication Flowcharts](#3-authentication-flowcharts)
4. [Authorization and Access Control Flowcharts](#4-authorization-and-access-control-flowcharts)
5. [Role-Based Access Control (RBAC) Flowcharts](#5-role-based-access-control-rbac-flowcharts)
6. [Security Decorator Flowcharts](#6-security-decorator-flowcharts)
7. [User Activity Logging Flowcharts](#7-user-activity-logging-flowcharts)
8. [Password Management Flowcharts](#8-password-management-flowcharts)
9. [Mobile App Authentication Flowcharts](#9-mobile-app-authentication-flowcharts)
10. [Session Management Flowcharts](#10-session-management-flowcharts)

---

## 1. FLOWCHART SYMBOLS AND DEFINITIONS

### Standard Flowchart Symbols (ISO 5807)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SYMBOL          â”‚ NAME                    â”‚ USAGE                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”‚ Terminal/Terminator     â”‚ Start or End of process â”‚
â”‚   â”‚ START â”‚     â”‚ (Rounded Rectangle)     â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Process                 â”‚ Action or operation     â”‚
â”‚   â”‚ Process â”‚   â”‚ (Rectangle)             â”‚ (e.g., "Hash Password") â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚       â—‡         â”‚ Decision                â”‚ Yes/No question or      â”‚
â”‚      / \        â”‚ (Diamond)               â”‚ conditional check       â”‚
â”‚     /   \       â”‚                         â”‚                         â”‚
â”‚    â—‡â”€â”€â”€â”€â”€â—‡      â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Input/Output            â”‚ Data input or output    â”‚
â”‚   â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚   â”‚ (Parallelogram)         â”‚ (e.g., "Display Error") â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Database                â”‚ Database read/write     â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”  â”‚   â”‚ (Cylinder)              â”‚ operation               â”‚
â”‚   â”‚  â””â”€â”€â”€â”˜  â”‚   â”‚                         â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Document                â”‚ Report or document      â”‚
â”‚   â”‚         â”‚   â”‚ (Wavy Bottom)           â”‚ generation              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚      â•°â”€â”€â”€â”€â”€â•¯    â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Predefined Process      â”‚ Subprocess or function  â”‚
â”‚   â•‘ Process â•‘   â”‚ (Double Rectangle)      â”‚ call (e.g., decorator)  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚       â”€â†’        â”‚ Flow Line               â”‚ Direction of flow       â”‚
â”‚                 â”‚ (Arrow)                 â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚       â“˜         â”‚ Annotation              â”‚ Additional information  â”‚
â”‚       â”‚         â”‚ (Circle with line)      â”‚ or notes                â”‚
â”‚                 â”‚                         â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Custom Symbols for This System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SYMBOL          â”‚ NAME                    â”‚ USAGE                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Security Check          â”‚ Authentication or       â”‚
â”‚   â”‚ğŸ”’ Check â”‚   â”‚ (Rectangle with lock)   â”‚ authorization validationâ”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Audit Log               â”‚ Activity logging        â”‚
â”‚   â”‚ğŸ“ Log   â”‚   â”‚ (Rectangle with note)   â”‚ for audit trail         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Access Denied           â”‚ Authorization failure   â”‚
â”‚   â”‚ğŸš« 403   â”‚   â”‚ (Rectangle with X)      â”‚ response                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                         â”‚                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Redirect                â”‚ HTTP redirect to        â”‚
â”‚   â”‚â†©ï¸ Login â”‚   â”‚ (Rectangle with arrow)  â”‚ another page            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚                         â”‚
â”‚                 â”‚                         â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. USER ROLE HIERARCHY

### 2.1 Role Structure Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    DJANGO USER AUTHENTICATION    â”‚
                    â”‚         (Built-in User)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                              â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
              â”‚ is_super  â”‚                  â”‚  Staff  â”‚
              â”‚   user    â”‚                  â”‚ Profile â”‚
              â”‚  = True   â”‚                  â”‚  Model  â”‚
              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                    â”‚                             â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   SUPERUSER   â”‚         â”‚                    â”‚
              â”‚  (Full Access)â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  ADMIN  â”‚        â”‚ FIELD STAFF  â”‚
                                   â”‚  Role   â”‚        â”‚     Role     â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Role Permissions Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PERMISSION                   â”‚ SUPERUSER â”‚ ADMIN â”‚ FIELD STAFF â”‚ PUBLIC    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ User Management              â”‚    âœ“      â”‚   âœ—   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ View Login History           â”‚    âœ“      â”‚   âœ—   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ View Security Audit          â”‚    âœ“      â”‚   âœ—   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ Manage System Settings       â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ Configure Penalty System     â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ Create/Edit Consumers        â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ View All Consumers           â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ View Assigned Consumers      â”‚    âœ“      â”‚   âœ“   â”‚     âœ“       â”‚    âœ—      â”‚
â”‚ Submit Meter Readings        â”‚    âœ“      â”‚   âœ“   â”‚     âœ“       â”‚    âœ—      â”‚
â”‚ Confirm Meter Readings       â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ Generate Bills               â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ Process Payments             â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ Waive Penalties              â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ View All Reports             â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ Export Data                  â”‚    âœ“      â”‚   âœ“   â”‚     âœ—       â”‚    âœ—      â”‚
â”‚ Dashboard Access             â”‚    âœ“      â”‚   âœ“   â”‚     âœ“       â”‚    âœ—      â”‚
â”‚ Mobile App API Access        â”‚    âœ“      â”‚   âœ“   â”‚     âœ“       â”‚    âœ—      â”‚
â”‚ View Own Profile             â”‚    âœ“      â”‚   âœ“   â”‚     âœ“       â”‚    âœ—      â”‚
â”‚ Password Reset               â”‚    âœ“      â”‚   âœ“   â”‚     âœ“       â”‚    âœ“      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
  âœ“ = Allowed
  âœ— = Denied
```

### 2.3 Role Attributes Table

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ROLE        â”‚ Database Field         â”‚ Access Level â”‚ Typical Use Case     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SUPERUSER   â”‚ User.is_superuser=True â”‚ Level 1      â”‚ System Administrator â”‚
â”‚             â”‚                        â”‚ (Highest)    â”‚ IT Manager           â”‚
â”‚             â”‚                        â”‚              â”‚                      â”‚
â”‚ ADMIN       â”‚ StaffProfile.role=     â”‚ Level 2      â”‚ Office Manager       â”‚
â”‚             â”‚ 'admin'                â”‚              â”‚ Billing Clerk        â”‚
â”‚             â”‚                        â”‚              â”‚ Cashier              â”‚
â”‚             â”‚                        â”‚              â”‚                      â”‚
â”‚ FIELD STAFF â”‚ StaffProfile.role=     â”‚ Level 3      â”‚ Meter Reader         â”‚
â”‚             â”‚ 'field_staff'          â”‚              â”‚ Field Inspector      â”‚
â”‚             â”‚                        â”‚              â”‚                      â”‚
â”‚ PUBLIC      â”‚ Unauthenticated        â”‚ Level 4      â”‚ General Website      â”‚
â”‚             â”‚                        â”‚ (Lowest)     â”‚ Visitors             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 Role Decision Tree

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚ User Role â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Is User  â”‚
                           â—‡ Authenti- â—‡
                            â”‚  cated?   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      NO          â”‚          YES
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   PUBLIC  â”‚                   â”‚   Check   â”‚
            â”‚   ROLE    â”‚                   â”‚is_superuserâ”‚
            â”‚ (Level 4) â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
                                        YES       â”‚       NO
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚                      â”‚
                                â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                â”‚ SUPERUSER â”‚         â”‚   Check   â”‚
                                â”‚   ROLE    â”‚         â”‚StaffProfileâ”‚
                                â”‚ (Level 1) â”‚         â”‚   Role    â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                            â”‚
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚                               â”‚
                                      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                      â”‚   ADMIN   â”‚                   â”‚   FIELD   â”‚
                                      â”‚   ROLE    â”‚                   â”‚   STAFF   â”‚
                                      â”‚ (Level 2) â”‚                   â”‚  (Level 3)â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. AUTHENTICATION FLOWCHARTS

### 3.1 Staff Login Flow (Web Portal)

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚User visitsâ”‚
                            â”‚ /login/   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Display  â”‚
                            â”‚   Login   â”‚
                            â”‚   Form    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ User Enterâ”‚
                            â”‚ Username &â”‚
                            â”‚ Password  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Capture  â”‚
                            â”‚ IP Addressâ”‚
                            â”‚ User Agentâ”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Call    â”‚
                           â—‡Django Authâ—‡
                            â”‚authenticateâ”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      Valid?      â”‚      Invalid?
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Create   â”‚                   â”‚ğŸ“ Log     â”‚
            â”‚UserLogin  â”‚                   â”‚  Failed   â”‚
            â”‚Event      â”‚                   â”‚  Attempt  â”‚
            â”‚status=    â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚'success'  â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                  â”‚                         â”‚ğŸš« Display â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”‚   Error   â”‚
            â”‚  Create   â”‚                   â”‚  Message  â”‚
            â”‚  Django   â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚  Session  â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”‚   Return  â”‚
            â”‚  Store    â”‚                   â”‚  to Login â”‚
            â”‚ Session   â”‚                   â”‚   Form    â”‚
            â”‚    Key    â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚ğŸ“ Log     â”‚
            â”‚ User Loginâ”‚
            â”‚  Activity â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Redirect â”‚
            â”‚    to     â”‚
            â”‚ Dashboard â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/views.py:819` (staff_login function)

### 3.2 Mobile App Login Flow (API Endpoint)

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚Mobile App â”‚
                            â”‚ POST      â”‚
                            â”‚/api/login/â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Parse    â”‚
                            â”‚   JSON    â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Extract  â”‚
                            â”‚ username  â”‚
                            â”‚ password  â”‚
                            â”‚device_infoâ”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ğŸ”’ Validateâ”‚
                           â—‡Credentialsâ—‡
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      Valid?      â”‚      Invalid?
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Check   â”‚                   â”‚ğŸ“ Log     â”‚
            â”‚   Staff   â”‚                   â”‚  Failed   â”‚
            â”‚  Profile  â”‚                   â”‚  Login    â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚method=    â”‚
                  â”‚                         â”‚'mobile'   â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚   Get     â”‚                         â”‚
            â”‚ Assigned  â”‚                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚ Barangay  â”‚                   â”‚  Return   â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚   JSON    â”‚
                  â”‚                         â”‚  Error    â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”‚status=401 â”‚
            â”‚  Create   â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚UserLogin  â”‚
            â”‚Event      â”‚
            â”‚method=    â”‚
            â”‚'mobile'   â”‚
            â”‚status=    â”‚
            â”‚'success'  â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Generate â”‚
            â”‚  Session  â”‚
            â”‚   Token   â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Return   â”‚
            â”‚   JSON    â”‚
            â”‚ Response  â”‚
            â”‚  with:    â”‚
            â”‚  - token  â”‚
            â”‚  - user   â”‚
            â”‚ - barangayâ”‚
            â”‚status=200 â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/views.py:549` (api_login function)

### 3.3 Logout Flow (Web & Mobile)

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚User clicksâ”‚
                            â”‚  Logout   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Get User â”‚
                            â”‚  Session  â”‚
                            â”‚    Key    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Find     â”‚
                           â—‡ Active    â—‡
                            â”‚UserLogin  â”‚
                            â”‚  Event?   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      Found?      â”‚      Not Found?
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Update   â”‚                   â”‚   Call    â”‚
            â”‚UserLogin  â”‚                   â”‚  Django   â”‚
            â”‚Event:     â”‚                   â”‚  logout() â”‚
            â”‚logout_    â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚timestamp= â”‚                         â”‚
            â”‚  now()    â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚ğŸ“ Log     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ Logout    â”‚
            â”‚ Activity  â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Call    â”‚
            â”‚  Django   â”‚
            â”‚ logout()  â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Destroy  â”‚
            â”‚  Session  â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Redirect â”‚
            â”‚    to     â”‚
            â”‚   Login   â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/views.py:893` (staff_logout function)

---

## 4. AUTHORIZATION AND ACCESS CONTROL FLOWCHARTS

### 4.1 Request Authorization Flow (General)

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚User makes â”‚
                            â”‚  HTTP     â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡ @login_   â—‡
                            â”‚ required  â”‚
                            â”‚decorator? â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    Present?      â”‚      Not Present?
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Check   â”‚                   â”‚  Execute  â”‚
            â”‚   User    â”‚                   â”‚   View    â”‚
           â—‡Authenticatedâ—‡                  â”‚ Function  â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚                               â”‚
        NO        â”‚        YES                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
      â”‚                       â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”             â”‚
â”‚â†©ï¸ Redirectâ”‚         â”‚   Check     â”‚             â”‚
â”‚  to Login â”‚         â”‚  Decorator  â”‚             â”‚
â”‚   Page    â”‚         â”‚   Type      â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â”‚
                              â”‚                   â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
              â”‚               â”‚                â”‚  â”‚
        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â–¼â”€â”€â”
        â”‚@superuser_â”‚   â”‚@admin_or_ â”‚  â”‚   None    â”‚
        â”‚ required  â”‚   â”‚ superuser â”‚  â”‚ Continue  â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â”‚_required  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚               â”‚
        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
        â”‚   Flow    â”‚   â”‚   Flow    â”‚
        â”‚    4.2    â”‚   â”‚    4.3    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Superuser Required Authorization Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚@superuser_â”‚
                            â”‚ required  â”‚
                            â”‚ decorator â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡request.userâ—‡
                            â”‚.is_authentâ”‚
                            â”‚  icated   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      NO          â”‚          YES
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚ Display   â”‚                   â”‚   Check   â”‚
            â”‚  "Login   â”‚                  â—‡request.userâ—‡
            â”‚ Required" â”‚                   â”‚.is_super  â”‚
            â”‚  Message  â”‚                   â”‚   user    â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”             TRUE        â”‚        FALSE
            â”‚â†©ï¸ Redirectâ”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  to Login â”‚         â”‚                            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚ğŸ“ Log     â”‚              â”‚  Display     â”‚
                            â”‚  Access   â”‚              â”‚ "Access      â”‚
                            â”‚  Granted  â”‚              â”‚  Denied"     â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚  Message     â”‚
                                  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                     â”‚
                            â”‚  Execute  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚   View    â”‚              â”‚ğŸ“ Log        â”‚
                            â”‚ Function  â”‚              â”‚ Unauthorized â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚  Attempt     â”‚
                                  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                     â”‚
                            â”‚  Return   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚  Response â”‚              â”‚ğŸš« Render     â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚  403.html    â”‚
                                  â”‚                    â”‚  Template    â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                            â”‚    END    â”‚                      â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
                                                         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                                         â”‚    END    â”‚
                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/decorators.py:14` (superuser_required decorator)

### 4.3 Admin or Superuser Required Authorization Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚@admin_or_ â”‚
                            â”‚ superuser â”‚
                            â”‚_required  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡request.userâ—‡
                            â”‚.is_authentâ”‚
                            â”‚  icated   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      NO          â”‚          YES
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚â†©ï¸ Redirectâ”‚                   â”‚   Check   â”‚
            â”‚  to Login â”‚                  â—‡request.userâ—‡
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚.is_super  â”‚
                                            â”‚   user    â”‚
                                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                      TRUE        â”‚        FALSE
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚                            â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚âœ“ ALLOW    â”‚              â”‚   Query      â”‚
                            â”‚  Access   â”‚              â”‚  Database    â”‚
                            â”‚(Superuser)â”‚              â”‚StaffProfile  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚                            â”‚
                                  â”‚                      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                  â”‚                      â”‚  Profile  â”‚
                                  â”‚                     â—‡   Exists?  â—‡
                                  â”‚                      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚                            â”‚
                                  â”‚              YES           â”‚         NO
                                  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚          â”‚                           â”‚
                                  â”‚    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                  â”‚    â”‚   Check   â”‚             â”‚ğŸš« DENY       â”‚
                                  â”‚   â—‡profile.roleâ—‡            â”‚   Access     â”‚
                                  â”‚    â”‚ == 'admin'â”‚             â”‚(No Profile)  â”‚
                                  â”‚    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚          â”‚                           â”‚
                                  â”‚  TRUE    â”‚    FALSE                  â”‚
                                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
                                  â”‚  â”‚                â”‚                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”           â”‚
                            â”‚âœ“ ALLOW     â”‚    â”‚ğŸš« DENY       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚  Access    â”‚    â”‚   Access     â”‚
                            â”‚  (Admin)   â”‚    â”‚(Field Staff) â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚                   â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚  Execute  â”‚      â”‚  Render     â”‚
                            â”‚   View    â”‚      â”‚  403.html   â”‚
                            â”‚ Function  â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â”‚
                                  â”‚                   â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚    END    â”‚      â”‚     END     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/decorators.py:41` (admin_or_superuser_required decorator)

---

## 5. ROLE-BASED ACCESS CONTROL (RBAC) FLOWCHARTS

### 5.1 Consumer List Access Control

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚  Request  â”‚
                            â”‚ Consumer  â”‚
                            â”‚   List    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ğŸ”’ Check   â”‚
                            â”‚ @login_   â”‚
                            â”‚ required  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡  User Role â—‡
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                        â”‚                         â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚ SUPERUSER â”‚          â”‚    ADMIN     â”‚         â”‚ FIELD STAFF  â”‚
   â”‚    OR     â”‚          â”‚              â”‚         â”‚              â”‚
   â”‚   ADMIN   â”‚          â”‚              â”‚         â”‚              â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚   Query   â”‚          â”‚   Query      â”‚         â”‚   Query      â”‚
   â”‚    DB:    â”‚          â”‚    DB:       â”‚         â”‚    DB:       â”‚
   â”‚ Consumer. â”‚          â”‚ Consumer.    â”‚         â”‚ Consumer.    â”‚
   â”‚objects.allâ”‚          â”‚objects.all() â”‚         â”‚objects.filterâ”‚
   â”‚    ()     â”‚          â”‚              â”‚         â”‚  (barangay=  â”‚
   â”‚           â”‚          â”‚              â”‚         â”‚   assigned)  â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Render   â”‚
                            â”‚ consumer_ â”‚
                            â”‚ list.html â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚    END    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/views.py:1714` (consumer_list function)

### 5.2 Meter Reading Confirmation Access Control

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚  Confirm  â”‚
                            â”‚  Reading  â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ğŸ”’ Check   â”‚
                            â”‚ @login_   â”‚
                            â”‚ required  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡  User Role â—‡
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚ SUPERUSER â”‚                  â”‚ FIELD STAFF  â”‚
            â”‚    OR     â”‚                  â”‚              â”‚
            â”‚   ADMIN   â”‚                  â”‚              â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚âœ“ ALLOW    â”‚                  â”‚ğŸš« DENY       â”‚
            â”‚  Access   â”‚                  â”‚   Access     â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚(Unauthorized)â”‚
                  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚   Get     â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚  Reading  â”‚                  â”‚  Display    â”‚
            â”‚   Record  â”‚                  â”‚   Error     â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚  Message    â”‚
                  â”‚                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚  Update:  â”‚                         â”‚
            â”‚is_confirmedâ”‚                        â”‚
            â”‚  = True   â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚  Generate â”‚                         â”‚
            â”‚    Bill   â”‚                         â”‚
            â”‚(Automated)â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚ğŸ“ Log     â”‚                         â”‚
            â”‚  Activity â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚  Success  â”‚                  â”‚     END     â”‚
            â”‚  Message  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/views.py:2692` (confirm_reading function)

### 5.3 Payment Processing Access Control

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚  Process  â”‚
                            â”‚  Payment  â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ğŸ”’ Check   â”‚
                            â”‚ @login_   â”‚
                            â”‚ required  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡  User Role â—‡
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚ SUPERUSER â”‚                  â”‚ FIELD STAFF  â”‚
            â”‚    OR     â”‚                  â”‚              â”‚
            â”‚   ADMIN   â”‚                  â”‚              â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚âœ“ ALLOW    â”‚                  â”‚ğŸš« DENY       â”‚
            â”‚  Access   â”‚                  â”‚   Access     â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚(Cannot       â”‚
                  â”‚                        â”‚ Process      â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”‚ Payments)    â”‚
            â”‚  Display  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚  Payment  â”‚                          â”‚
            â”‚  Inquiry  â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚   Form    â”‚                   â”‚  Redirect   â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚     to      â”‚
                  â”‚                         â”‚  Dashboard  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚   User    â”‚                          â”‚
            â”‚  Selects  â”‚                          â”‚
            â”‚   Bills   â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚ Calculate â”‚                          â”‚
            â”‚  Penalty  â”‚                          â”‚
            â”‚(If Overdueâ”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚Admin Can  â”‚                          â”‚
           â—‡Waive Penaltyâ—‡                         â”‚
            â”‚(Optional) â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚  Process  â”‚                          â”‚
            â”‚  Payment  â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚ Generate  â”‚                          â”‚
            â”‚ OR Number â”‚                          â”‚
            â”‚(Official  â”‚                          â”‚
            â”‚ Receipt)  â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚ğŸ“ Log     â”‚                          â”‚
            â”‚  Payment  â”‚                          â”‚
            â”‚  Activity â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚   Print   â”‚                          â”‚
            â”‚  Receipt  â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚                   â”‚     END     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 System Settings Access Control

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚  Access   â”‚
                            â”‚  System   â”‚
                            â”‚ Settings  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ğŸ”’ Check   â”‚
                            â”‚ @admin_or â”‚
                            â”‚_superuser â”‚
                            â”‚_required  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡  User Role â—‡
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚ SUPERUSER â”‚                  â”‚ FIELD STAFF  â”‚
            â”‚    OR     â”‚                  â”‚              â”‚
            â”‚   ADMIN   â”‚                  â”‚              â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚âœ“ ALLOW    â”‚                  â”‚ğŸš« DENY       â”‚
            â”‚  Access   â”‚                  â”‚   Access     â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚   Query   â”‚                  â”‚  Render      â”‚
            â”‚SystemSett â”‚                  â”‚  403.html    â”‚
            â”‚    ing    â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚  Display  â”‚                          â”‚
            â”‚ Settings  â”‚                          â”‚
            â”‚   Form    â”‚                          â”‚
            â”‚  - Rates  â”‚                          â”‚
            â”‚ - Penalty â”‚                          â”‚
            â”‚ - Scheduleâ”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚   Admin   â”‚                          â”‚
            â”‚  Updates  â”‚                          â”‚
            â”‚  Values   â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚  Validate â”‚                          â”‚
            â”‚   Input   â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚   Save    â”‚                          â”‚
            â”‚    to     â”‚                          â”‚
            â”‚ Database  â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚ğŸ“ Log     â”‚                          â”‚
            â”‚ "Settings â”‚                          â”‚
            â”‚  Updated" â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚  Success  â”‚                   â”‚     END     â”‚
            â”‚  Message  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 User Management Access Control

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚   User    â”‚
                            â”‚Management â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ğŸ”’ Check   â”‚
                            â”‚@superuser â”‚
                            â”‚_required  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡  User Role â—‡
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚ SUPERUSER â”‚                  â”‚    ADMIN     â”‚
            â”‚   ONLY    â”‚                  â”‚     OR       â”‚
            â”‚           â”‚                  â”‚ FIELD STAFF  â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚âœ“ ALLOW    â”‚                  â”‚ğŸš« DENY       â”‚
            â”‚  Access   â”‚                  â”‚   Access     â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚(Superuser    â”‚
                  â”‚                        â”‚  Required)   â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚  Display  â”‚                          â”‚
            â”‚   User    â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚   List    â”‚                   â”‚  Display    â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚   Error     â”‚
                  â”‚                         â”‚  Message    â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚Superuser  â”‚                          â”‚
            â”‚    Can:   â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚- Create   â”‚                   â”‚  Render     â”‚
            â”‚- Edit     â”‚                   â”‚  403.html   â”‚
            â”‚- Delete   â”‚                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚- View     â”‚                          â”‚
            â”‚  Login    â”‚                          â”‚
            â”‚  History  â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚  Perform  â”‚                          â”‚
            â”‚ Requested â”‚                          â”‚
            â”‚  Action   â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                          â”‚
            â”‚ğŸ“ Log     â”‚                          â”‚
            â”‚ Security  â”‚                          â”‚
            â”‚  Action   â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
                  â”‚                                â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚                   â”‚     END     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. SECURITY DECORATOR FLOWCHARTS

### 6.1 Security Decorator Execution Order

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚  Incoming â”‚
                            â”‚  HTTP     â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Django  â”‚
                            â”‚Middleware â”‚
                            â”‚  Process  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   URL     â”‚
                            â”‚  Resolver â”‚
                            â”‚  Matches  â”‚
                            â”‚   View    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Decoratorâ”‚
                           â—‡   Stack    â—‡
                            â”‚  Applied? â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      YES         â”‚         NO
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Execute  â”‚                   â”‚  Execute  â”‚
            â”‚Decorators â”‚                   â”‚   View    â”‚
            â”‚ in Order: â”‚                   â”‚ Function  â”‚
            â”‚           â”‚                   â”‚  Directly â”‚
            â”‚1. @login_ â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚  required â”‚                         â”‚
            â”‚           â”‚                         â”‚
            â”‚2. @super  â”‚                         â”‚
            â”‚  user_req â”‚                         â”‚
            â”‚  OR       â”‚                         â”‚
            â”‚  @admin_  â”‚                         â”‚
            â”‚  or_super â”‚                         â”‚
            â”‚           â”‚                         â”‚
            â”‚3. @log_   â”‚                         â”‚
            â”‚  activity â”‚                         â”‚
            â”‚  (if any) â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚   Each    â”‚                         â”‚
            â”‚ Decorator â”‚                         â”‚
            â”‚   Calls   â”‚                         â”‚
            â”‚   Next    â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚   Final   â”‚                         â”‚
            â”‚ Decorator â”‚                         â”‚
            â”‚   Calls   â”‚                         â”‚
            â”‚   View    â”‚                         â”‚
            â”‚ Function  â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   View    â”‚
                            â”‚ Function  â”‚
                            â”‚ Executes  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Return   â”‚
                            â”‚ Response  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚    END    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Custom Decorator: @log_activity

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚@log_activ â”‚
                            â”‚   ity     â”‚
                            â”‚("desc")   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Execute  â”‚
                            â”‚   View    â”‚
                            â”‚ Function  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Store   â”‚
                            â”‚  Response â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡request.userâ—‡
                            â”‚.is_authentâ”‚
                            â”‚  icated   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      YES         â”‚         NO
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Get     â”‚                   â”‚   Skip    â”‚
            â”‚get_client â”‚                   â”‚  Logging  â”‚
            â”‚   _ip()   â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚   Get     â”‚                         â”‚
            â”‚get_user_  â”‚                         â”‚
            â”‚  agent()  â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚  Create   â”‚                         â”‚
            â”‚UserActivityâ”‚                        â”‚
            â”‚  Record:  â”‚                         â”‚
            â”‚           â”‚                         â”‚
            â”‚- user     â”‚                         â”‚
            â”‚- action   â”‚                         â”‚
            â”‚- descript â”‚                         â”‚
            â”‚  ion      â”‚                         â”‚
            â”‚- ip_addr  â”‚                         â”‚
            â”‚- user_agt â”‚                         â”‚
            â”‚- timestampâ”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚ğŸ“ Log to  â”‚                         â”‚
            â”‚  Security â”‚                         â”‚
            â”‚   Audit   â”‚                         â”‚
            â”‚    File   â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Return   â”‚
                            â”‚  Original â”‚
                            â”‚  Response â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚    END    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/decorators.py:78` (log_activity decorator)

---

## 7. USER ACTIVITY LOGGING FLOWCHARTS

### 7.1 Activity Logging Process

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚   User    â”‚
                            â”‚  Performs â”‚
                            â”‚  Action   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Action   â”‚
                            â”‚ Triggers  â”‚
                            â”‚@log_activ â”‚
                            â”‚   ity     â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Extract  â”‚
                            â”‚  Request  â”‚
                            â”‚   Data:   â”‚
                            â”‚- user     â”‚
                            â”‚- IP addr  â”‚
                            â”‚- User agt â”‚
                            â”‚- timestampâ”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Find    â”‚
                            â”‚  Active   â”‚
                           â—‡UserLogin  â—‡
                            â”‚  Event?   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      Found?      â”‚      Not Found?
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Link    â”‚                   â”‚   Create  â”‚
            â”‚  Activity â”‚                   â”‚  Activity â”‚
            â”‚    to     â”‚                   â”‚  Without  â”‚
            â”‚   Login   â”‚                   â”‚   Login   â”‚
            â”‚   Event   â”‚                   â”‚   Link    â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚                               â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Create   â”‚
                            â”‚UserActivityâ”‚
                            â”‚  Record   â”‚
                            â”‚     in    â”‚
                            â”‚ Database  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Write   â”‚
                            â”‚    to     â”‚
                            â”‚  Audit    â”‚
                            â”‚    Log    â”‚
                            â”‚   File    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚    END    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Critical Actions That Trigger Logging

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ACTION TYPE              â”‚ LOGGED EVENT           â”‚ LOGGED BY       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ User Login               â”‚ "user_login"           â”‚ staff_login()   â”‚
â”‚ User Logout              â”‚ "user_logout"          â”‚ staff_logout()  â”‚
â”‚ Password Reset Request   â”‚ "password_reset"       â”‚ reset_password()â”‚
â”‚ Consumer Created         â”‚ "consumer_created"     â”‚ create_consumerâ”‚
â”‚ Consumer Updated         â”‚ "consumer_updated"     â”‚ edit_consumer() â”‚
â”‚ Consumer Disconnected    â”‚ "consumer_disconnect"  â”‚ disconnect()    â”‚
â”‚ Meter Reading Submitted  â”‚ "reading_submitted"    â”‚ submit_reading()â”‚
â”‚ Meter Reading Confirmed  â”‚ "reading_confirmed"    â”‚ confirm_readingâ”‚
â”‚ Bill Generated           â”‚ "bill_generated"       â”‚ auto-triggered  â”‚
â”‚ Payment Processed        â”‚ "payment_processed"    â”‚ process_paymentâ”‚
â”‚ Penalty Waived           â”‚ "penalty_waived"       â”‚ waive_penalty() â”‚
â”‚ System Settings Changed  â”‚ "settings_updated"     â”‚ update_settingsâ”‚
â”‚ User Created/Deleted     â”‚ "user_management"      â”‚ user_mgmt()     â”‚
â”‚ Report Generated         â”‚ "report_generated"     â”‚ reports()       â”‚
â”‚ Data Exported            â”‚ "data_exported"        â”‚ export_excel()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 Security Audit Trail Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚ Security  â”‚
                            â”‚   Audit   â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ğŸ”’ @super  â”‚
                            â”‚  user_    â”‚
                            â”‚ required  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Query   â”‚
                            â”‚UserLogin  â”‚
                            â”‚   Events  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Query   â”‚
                            â”‚UserActivityâ”‚
                            â”‚  Records  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Filter  â”‚
                            â”‚    by:    â”‚
                            â”‚- Date     â”‚
                            â”‚- User     â”‚
                            â”‚- Action   â”‚
                            â”‚- Status   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Display  â”‚
                            â”‚  Audit    â”‚
                            â”‚   Trail:  â”‚
                            â”‚           â”‚
                            â”‚For Each:  â”‚
                            â”‚- Who?     â”‚
                            â”‚- What?    â”‚
                            â”‚- When?    â”‚
                            â”‚- Where?   â”‚
                            â”‚  (IP)     â”‚
                            â”‚- Status?  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Export   â”‚
                            â”‚  Option   â”‚
                            â”‚  (Excel)  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚    END    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. PASSWORD MANAGEMENT FLOWCHARTS

### 8.1 Password Reset Request Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚User clicksâ”‚
                            â”‚ "Forgot   â”‚
                            â”‚ Password" â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Display  â”‚
                            â”‚  Username â”‚
                            â”‚   Input   â”‚
                            â”‚   Form    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   User    â”‚
                            â”‚  Enters   â”‚
                            â”‚ Username  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Query   â”‚
                           â—‡   User     â—‡
                            â”‚  Exists?  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      YES         â”‚         NO
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚ Generate  â”‚                   â”‚  Display  â”‚
            â”‚  Unique   â”‚                   â”‚  Generic  â”‚
            â”‚   Token   â”‚                   â”‚  Message  â”‚
            â”‚ (UUID)    â”‚                   â”‚(Security) â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚   Create  â”‚                         â”‚
            â”‚ Password  â”‚                         â”‚
            â”‚ResetToken â”‚                         â”‚
            â”‚  Record:  â”‚                         â”‚
            â”‚           â”‚                         â”‚
            â”‚- user     â”‚                         â”‚
            â”‚- token    â”‚                         â”‚
            â”‚- created  â”‚                         â”‚
            â”‚- expires  â”‚                         â”‚
            â”‚  (24hrs)  â”‚                         â”‚
            â”‚- IP addr  â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚   Send    â”‚                         â”‚
            â”‚   Email   â”‚                         â”‚
            â”‚   with    â”‚                         â”‚
            â”‚   Reset   â”‚                         â”‚
            â”‚   Link    â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚ğŸ“ Log     â”‚                         â”‚
            â”‚ "password â”‚                         â”‚
            â”‚  _reset_  â”‚                         â”‚
            â”‚  request" â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚  Display  â”‚                         â”‚
            â”‚ "Check    â”‚                         â”‚
            â”‚  Email"   â”‚                         â”‚
            â”‚  Message  â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚                   â”‚    END    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/views.py` (reset_password function)

### 8.2 Password Reset Confirmation Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚User clicksâ”‚
                            â”‚Email Link â”‚
                            â”‚/reset/    â”‚
                            â”‚{token}/   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Query   â”‚
                           â—‡ Password   â—‡
                            â”‚ResetToken â”‚
                            â”‚  by Token â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      Found?      â”‚      Not Found?
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Check   â”‚                   â”‚  Display  â”‚
           â—‡   Token    â—‡                   â”‚ "Invalid  â”‚
            â”‚ Expired?  â”‚                   â”‚  Token"   â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚  Error    â”‚
                  â”‚                         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        NO        â”‚        YES                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
      â”‚                       â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   Check   â”‚         â”‚  Display     â”‚            â”‚
â”‚   Token   â”‚         â”‚ "Expired"    â”‚            â”‚
â—‡  Already  â—‡         â”‚   Error      â”‚            â”‚
â”‚   Used?   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚                   â”‚
      â”‚                       â”‚                   â”‚
  NO  â”‚  YES                  â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                 â”‚                   â”‚
â”‚           â”‚                 â”‚                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”           â”‚                   â”‚
â”‚     â”‚  Display  â”‚           â”‚                   â”‚
â”‚     â”‚ "Already  â”‚           â”‚                   â”‚
â”‚     â”‚   Used"   â”‚           â”‚                   â”‚
â”‚     â”‚  Error    â”‚           â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚                   â”‚
â”‚           â”‚                 â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                             â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚                       â”‚    END    â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚
                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                   â”‚  Display  â”‚
                   â”‚   New     â”‚
                   â”‚ Password  â”‚
                   â”‚   Form    â”‚
                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚
                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                   â”‚   User    â”‚
                   â”‚  Enters   â”‚
                   â”‚   New     â”‚
                   â”‚ Password  â”‚
                   â”‚  (Twice)  â”‚
                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚
                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                   â”‚  Validate â”‚
                  â—‡ Password   â—‡
                   â”‚ Strength  â”‚
                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                         â”‚
             Valid?      â”‚      Invalid?
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚   Hash    â”‚                   â”‚  Display  â”‚
   â”‚ Password  â”‚                   â”‚   Error   â”‚
   â”‚  (Django) â”‚                   â”‚  Message  â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                               â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
   â”‚  Update   â”‚                         â”‚
   â”‚   User    â”‚                         â”‚
   â”‚ Password  â”‚                         â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
         â”‚                               â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
   â”‚   Mark    â”‚                         â”‚
   â”‚   Token   â”‚                         â”‚
   â”‚ as Used   â”‚                         â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
         â”‚                               â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
   â”‚ğŸ“ Log     â”‚                         â”‚
   â”‚ "password â”‚                         â”‚
   â”‚  _changed"â”‚                         â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
         â”‚                               â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
   â”‚  Display  â”‚                         â”‚
   â”‚ "Success" â”‚                         â”‚
   â”‚  Message  â”‚                         â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
         â”‚                               â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚  Redirect â”‚                   â”‚   Return  â”‚
   â”‚  to Login â”‚                   â”‚  to Form  â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚    END    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 Password Strength Validation Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚ Validate  â”‚
                            â”‚ Password  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Check   â”‚
                           â—‡  Length    â—‡
                            â”‚  >= 8     â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      NO          â”‚          YES
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   FAIL    â”‚                   â”‚   Check   â”‚
            â”‚ "Password â”‚                  â—‡ Uppercase  â—‡
            â”‚must be 8+ â”‚                   â”‚  Present  â”‚
            â”‚chars"     â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
                                      NO          â”‚          YES
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚                               â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   FAIL    â”‚                   â”‚   Check   â”‚
                            â”‚ "Must haveâ”‚                  â—‡ Lowercase  â—‡
                            â”‚uppercase" â”‚                   â”‚  Present  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                                  â”‚
                                                      NO          â”‚          YES
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚                               â”‚
                                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                            â”‚   FAIL    â”‚                   â”‚   Check   â”‚
                                            â”‚ "Must haveâ”‚                  â—‡   Digit    â—‡
                                            â”‚lowercase" â”‚                   â”‚  Present  â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                                                  â”‚
                                                                      NO          â”‚          YES
                                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                  â”‚                               â”‚
                                                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                                            â”‚   FAIL    â”‚                   â”‚   PASS    â”‚
                                                            â”‚ "Must haveâ”‚                   â”‚ "Password â”‚
                                                            â”‚  number"  â”‚                   â”‚is strong" â”‚
                                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                                                                  â”‚
                                                                                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                                                                            â”‚  Return   â”‚
                                                                                            â”‚   True    â”‚
                                                                                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                                                                  â”‚
                                                                                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                                                                                            â”‚    END    â”‚
                                                                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**File Reference:** `consumers/decorators.py:127` (check_password_strength helper)

---

## 9. MOBILE APP AUTHENTICATION FLOWCHARTS

### 9.1 Mobile Login API Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚  Mobile   â”‚
                            â”‚    App    â”‚
                            â”‚  Opened   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Display  â”‚
                            â”‚   Login   â”‚
                            â”‚  Screen   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚Field Staffâ”‚
                            â”‚  Enters   â”‚
                            â”‚Credentialsâ”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   POST    â”‚
                            â”‚    to     â”‚
                            â”‚/api/login/â”‚
                            â”‚  with:    â”‚
                            â”‚- username â”‚
                            â”‚- password â”‚
                            â”‚- device   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Backend  â”‚
                            â”‚ Validates â”‚
                            â”‚Credentialsâ”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      Valid?      â”‚      Invalid?
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Query   â”‚                   â”‚  Return   â”‚
            â”‚   Staff   â”‚                   â”‚   JSON    â”‚
            â”‚  Profile  â”‚                   â”‚  Error:   â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚           â”‚
                  â”‚                         â”‚{status:   â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”‚ "error",  â”‚
            â”‚   Check   â”‚                   â”‚ message:  â”‚
           â—‡   Role =   â—‡                   â”‚"Invalid"} â”‚
            â”‚field_staffâ”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚    OR     â”‚                         â”‚
            â”‚  admin?   â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
        YES       â”‚        NO                     â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
      â”‚                       â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   Get     â”‚         â”‚  Return      â”‚            â”‚
â”‚ Assigned  â”‚         â”‚   JSON       â”‚            â”‚
â”‚ Barangay  â”‚         â”‚  Error:      â”‚            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â”‚              â”‚            â”‚
      â”‚               â”‚{status:      â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”‚ "error",     â”‚            â”‚
â”‚  Create   â”‚         â”‚ message:     â”‚            â”‚
â”‚UserLogin  â”‚         â”‚"No mobile    â”‚            â”‚
â”‚Event:     â”‚         â”‚ access"}     â”‚            â”‚
â”‚           â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚- method=  â”‚                 â”‚                   â”‚
â”‚ 'mobile'  â”‚                 â”‚                   â”‚
â”‚- device   â”‚                 â”‚                   â”‚
â”‚- IP       â”‚                 â”‚                   â”‚
â”‚- status=  â”‚                 â”‚                   â”‚
â”‚ 'success' â”‚                 â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚                   â”‚
      â”‚                       â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                 â”‚                   â”‚
â”‚ Generate  â”‚                 â”‚                   â”‚
â”‚  Session  â”‚                 â”‚                   â”‚
â”‚   Token   â”‚                 â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚                   â”‚
      â”‚                       â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                 â”‚                   â”‚
â”‚  Return   â”‚                 â”‚                   â”‚
â”‚   JSON    â”‚                 â”‚                   â”‚
â”‚ Success:  â”‚                 â”‚                   â”‚
â”‚           â”‚                 â”‚                   â”‚
â”‚{status:   â”‚                 â”‚                   â”‚
â”‚ "success",â”‚                 â”‚                   â”‚
â”‚ token:    â”‚                 â”‚                   â”‚
â”‚  "...",   â”‚                 â”‚                   â”‚
â”‚ user: {}, â”‚                 â”‚                   â”‚
â”‚ barangay: â”‚                 â”‚                   â”‚
â”‚  "..."}   â”‚                 â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚                   â”‚
      â”‚                       â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ App Storesâ”‚          â”‚App Displays â”‚     â”‚App Displays â”‚
â”‚   Token   â”‚          â”‚    Error    â”‚     â”‚    Error    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚                       â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                 â”‚                    â”‚
â”‚  Navigate â”‚                 â”‚                    â”‚
â”‚    to     â”‚                 â”‚                    â”‚
â”‚ Consumer  â”‚                 â”‚                    â”‚
â”‚   List    â”‚                 â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚                    â”‚
      â”‚                       â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    END    â”‚          â”‚     END     â”‚     â”‚     END     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 Mobile API Request Authorization Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚  Mobile   â”‚
                            â”‚    API    â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Extract  â”‚
                            â”‚  Session  â”‚
                            â”‚   Token   â”‚
                            â”‚from Headerâ”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Validate â”‚
                           â—‡   Token    â—‡
                            â”‚  Exists   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      YES         â”‚         NO
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Find    â”‚                   â”‚  Return   â”‚
            â”‚   Django  â”‚                   â”‚   401     â”‚
            â”‚  Session  â”‚                   â”‚Unauthorizedâ”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚  Session  â”‚                         â”‚
           â—‡   Valid &  â—‡                         â”‚
            â”‚  Active?  â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
        YES       â”‚        NO                     â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
      â”‚                       â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   Get     â”‚         â”‚  Return      â”‚            â”‚
â”‚   User    â”‚         â”‚   401        â”‚            â”‚
â”‚   from    â”‚         â”‚Unauthorized  â”‚            â”‚
â”‚  Session  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚                   â”‚
      â”‚                       â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                 â”‚                   â”‚
â”‚   Check   â”‚                 â”‚                   â”‚
â—‡   User    â—‡                 â”‚                   â”‚
â”‚   Role    â”‚                 â”‚                   â”‚
â”‚Permissionsâ”‚                 â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚                   â”‚
      â”‚                       â”‚                   â”‚
  Allowed?      NO            â”‚                   â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                   â”‚
      â”‚             â”‚         â”‚                   â”‚
  YES â”‚       â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”‚                   â”‚
      â”‚       â”‚  Return   â”‚   â”‚                   â”‚
      â”‚       â”‚   403     â”‚   â”‚                   â”‚
      â”‚       â”‚ Forbidden â”‚   â”‚                   â”‚
      â”‚       â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
      â”‚             â”‚         â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”‚         â”‚                   â”‚
â”‚  Execute  â”‚       â”‚         â”‚                   â”‚
â”‚    API    â”‚       â”‚         â”‚                   â”‚
â”‚ Endpoint  â”‚       â”‚         â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚         â”‚                   â”‚
      â”‚             â”‚         â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”‚         â”‚                   â”‚
â”‚  Return   â”‚       â”‚         â”‚                   â”‚
â”‚   JSON    â”‚       â”‚         â”‚                   â”‚
â”‚ Response  â”‚       â”‚         â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚         â”‚                   â”‚
      â”‚             â”‚         â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    END    â”‚ â”‚    END    â”‚ â”‚  END  â”‚     â”‚     END     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 Mobile Logout Flow

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚Field Staffâ”‚
                            â”‚   Taps    â”‚
                            â”‚  Logout   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   POST    â”‚
                            â”‚    to     â”‚
                            â”‚/api/logoutâ”‚
                            â”‚  with     â”‚
                            â”‚  Token    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Backend  â”‚
                            â”‚ Validates â”‚
                            â”‚   Token   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Find    â”‚
                           â—‡  Active    â—‡
                            â”‚UserLogin  â”‚
                            â”‚  Event    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      Found?      â”‚      Not Found?
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Update   â”‚                   â”‚   Just    â”‚
            â”‚UserLogin  â”‚                   â”‚  Destroy  â”‚
            â”‚Event:     â”‚                   â”‚  Session  â”‚
            â”‚           â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚- logout_  â”‚                         â”‚
            â”‚  timestampâ”‚                         â”‚
            â”‚  = now()  â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                         â”‚
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                         â”‚
            â”‚ğŸ“ Log     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚  Logout   â”‚
            â”‚ Activity  â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Destroy  â”‚
            â”‚  Django   â”‚
            â”‚  Session  â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Return   â”‚
            â”‚   JSON    â”‚
            â”‚ Success:  â”‚
            â”‚           â”‚
            â”‚{status:   â”‚
            â”‚ "success",â”‚
            â”‚ message:  â”‚
            â”‚"Logged outâ”‚
            â”‚"}         â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚App Clears â”‚
            â”‚   Token   â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚  Navigate â”‚
            â”‚  to Login â”‚
            â”‚  Screen   â”‚
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚    END    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. SESSION MANAGEMENT FLOWCHARTS

### 10.1 Session Creation and Tracking

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚Successful â”‚
                            â”‚   Login   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Django  â”‚
                            â”‚  Creates  â”‚
                            â”‚  Session  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ Generate  â”‚
                            â”‚  Session  â”‚
                            â”‚    Key    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Store   â”‚
                            â”‚  Session  â”‚
                            â”‚    in     â”‚
                            â”‚ Database  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚    Set    â”‚
                            â”‚  Session  â”‚
                            â”‚  Cookie   â”‚
                            â”‚(sessionid)â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Create   â”‚
                            â”‚UserLogin  â”‚
                            â”‚Event:     â”‚
                            â”‚           â”‚
                            â”‚- user     â”‚
                            â”‚- session  â”‚
                            â”‚  _key     â”‚
                            â”‚- login_   â”‚
                            â”‚  timestampâ”‚
                            â”‚- IP       â”‚
                            â”‚- user_agt â”‚
                            â”‚- method   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Session  â”‚
                            â”‚  Expires  â”‚
                            â”‚   After   â”‚
                            â”‚  1 Hour   â”‚
                            â”‚  (Config) â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚    END    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 Session Validation on Each Request

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚ Protected â”‚
                            â”‚  Request  â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Extract  â”‚
                            â”‚ sessionid â”‚
                            â”‚from Cookieâ”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Query   â”‚
                           â—‡  Session   â—‡
                            â”‚ Exists in â”‚
                            â”‚    DB?    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      YES         â”‚         NO
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
            â”‚   Check   â”‚                   â”‚â†©ï¸ Redirectâ”‚
           â—‡  Session   â—‡                   â”‚  to Login â”‚
            â”‚ Expired?  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚
        NO        â”‚        YES
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   Get     â”‚         â”‚  Delete      â”‚
â”‚   User    â”‚         â”‚  Expired     â”‚
â”‚   from    â”‚         â”‚  Session     â”‚
â”‚  Session  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚
      â”‚                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”          â”‚â†©ï¸ Redirect  â”‚
â”‚   User    â”‚          â”‚  to Login   â”‚
â”‚Authenticatedâ”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚    Set    â”‚
â”‚request.userâ”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚  Proceed  â”‚
â”‚    to     â”‚
â”‚   View    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚    END    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.3 Session Cleanup Process

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   START   â”‚
                            â”‚  Periodic â”‚
                            â”‚   Cron    â”‚
                            â”‚    Job    â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Query   â”‚
                            â”‚   All     â”‚
                            â”‚  Sessions â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚   Filter  â”‚
                            â”‚  Expired  â”‚
                            â”‚  Sessions â”‚
                            â”‚(expire_dateâ”‚
                            â”‚  < now)   â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Update   â”‚
                            â”‚Associated â”‚
                            â”‚UserLogin  â”‚
                            â”‚  Events   â”‚
                            â”‚(set logoutâ”‚
                            â”‚ timestamp)â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚  Delete   â”‚
                            â”‚  Expired  â”‚
                            â”‚  Sessions â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚ğŸ“ Log     â”‚
                            â”‚  Cleanup  â”‚
                            â”‚  Activity â”‚
                            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                            â”‚    END    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## APPENDIX A: COMMON AUTHORIZATION SCENARIOS

### Scenario Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SCENARIO                     â”‚ USER ROLE        â”‚ OUTCOME                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Superuser accesses user mgmt â”‚ SUPERUSER        â”‚ âœ“ Allowed               â”‚
â”‚ Admin accesses user mgmt     â”‚ ADMIN            â”‚ âœ— Denied (403)          â”‚
â”‚ Field staff accesses user mgmtâ”‚FIELD STAFF       â”‚ âœ— Denied (403)          â”‚
â”‚                              â”‚                  â”‚                          â”‚
â”‚ Superuser processes payment  â”‚ SUPERUSER        â”‚ âœ“ Allowed               â”‚
â”‚ Admin processes payment      â”‚ ADMIN            â”‚ âœ“ Allowed               â”‚
â”‚ Field staff processes paymentâ”‚ FIELD STAFF      â”‚ âœ— Denied (403)          â”‚
â”‚                              â”‚                  â”‚                          â”‚
â”‚ Superuser submits reading    â”‚ SUPERUSER        â”‚ âœ“ Allowed               â”‚
â”‚ Admin submits reading        â”‚ ADMIN            â”‚ âœ“ Allowed               â”‚
â”‚ Field staff submits reading  â”‚ FIELD STAFF      â”‚ âœ“ Allowed (assigned onlyâ”‚
â”‚                              â”‚                  â”‚                          â”‚
â”‚ Superuser confirms reading   â”‚ SUPERUSER        â”‚ âœ“ Allowed               â”‚
â”‚ Admin confirms reading       â”‚ ADMIN            â”‚ âœ“ Allowed               â”‚
â”‚ Field staff confirms reading â”‚ FIELD STAFF      â”‚ âœ— Denied (403)          â”‚
â”‚                              â”‚                  â”‚                          â”‚
â”‚ Superuser views all consumersâ”‚ SUPERUSER        â”‚ âœ“ All consumers         â”‚
â”‚ Admin views all consumers    â”‚ ADMIN            â”‚ âœ“ All consumers         â”‚
â”‚ Field staff views consumers  â”‚ FIELD STAFF      â”‚ âœ“ Assigned barangay onlyâ”‚
â”‚                              â”‚                  â”‚                          â”‚
â”‚ Unauthenticated access       â”‚ PUBLIC           â”‚ â†©ï¸ Redirect to login    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## APPENDIX B: FILE REFERENCES

### Key Files for User Role Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FILE PATH                     â”‚ PURPOSE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ consumers/decorators.py       â”‚ Custom security decorators                 â”‚
â”‚   - Line 14: superuser_requiredâ”‚                                           â”‚
â”‚   - Line 41: admin_or_superuser_requiredâ”‚                                 â”‚
â”‚   - Line 78: log_activity     â”‚                                            â”‚
â”‚                              â”‚                                             â”‚
â”‚ consumers/models.py           â”‚ User-related models                        â”‚
â”‚   - Line 11: UserLoginEvent   â”‚                                            â”‚
â”‚   - Line 91: PasswordResetTokenâ”‚                                           â”‚
â”‚   - Line 268: StaffProfile    â”‚                                            â”‚
â”‚   - Line 297: UserActivity    â”‚                                            â”‚
â”‚                              â”‚                                             â”‚
â”‚ consumers/views.py            â”‚ View functions with authorization          â”‚
â”‚   - Line 819: staff_login     â”‚                                            â”‚
â”‚   - Line 893: staff_logout    â”‚                                            â”‚
â”‚   - Line 549: api_login (mobile)â”‚                                          â”‚
â”‚   - Line 1714: consumer_list  â”‚                                            â”‚
â”‚   - Line 2692: confirm_readingâ”‚                                            â”‚
â”‚                              â”‚                                             â”‚
â”‚ waterworks/settings.py        â”‚ Security configuration                     â”‚
â”‚   - SESSION_COOKIE_AGE        â”‚                                            â”‚
â”‚   - SESSION_SAVE_EVERY_REQUESTâ”‚                                            â”‚
â”‚   - CSRF settings             â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## APPENDIX C: SECURITY BEST PRACTICES IMPLEMENTED

### 1. Authentication Security
- âœ“ Password hashing using Django's PBKDF2
- âœ“ Password strength validation (8+ chars, uppercase, lowercase, numbers)
- âœ“ Session-based authentication (not token-based for web)
- âœ“ Secure session cookies (HttpOnly, Secure in production)
- âœ“ Session timeout (1 hour configurable)

### 2. Authorization Security
- âœ“ Role-Based Access Control (RBAC)
- âœ“ Decorator-based permission checks
- âœ“ Database-level permission verification
- âœ“ Principle of least privilege
- âœ“ Explicit deny by default

### 3. Audit and Monitoring
- âœ“ Comprehensive login tracking (IP, device, method)
- âœ“ Activity logging for critical actions
- âœ“ Failed login attempt logging
- âœ“ Session duration tracking
- âœ“ Security event timestamps

### 4. Password Management
- âœ“ Token-based password reset (24-hour expiration)
- âœ“ Single-use tokens
- âœ“ IP tracking for reset requests
- âœ“ Generic error messages (security through obscurity)

### 5. Mobile API Security
- âœ“ Session token authentication
- âœ“ Device information tracking
- âœ“ Separate login method tracking
- âœ“ Proper session termination

### 6. Django Security Features
- âœ“ CSRF protection enabled
- âœ“ XSS protection (auto-escaping)
- âœ“ SQL injection protection (ORM)
- âœ“ Clickjacking protection (X-Frame-Options)
- âœ“ HTTPS enforcement in production

---

## CONCLUSION

This document provides comprehensive flowchart diagrams and documentation for all user role-related processes in the Balilihan Waterworks Management System. The flowcharts follow standard thesis documentation practices and use ISO 5807 symbols.

### Key Takeaways:

1. **Three-Tier Role Hierarchy:** Superuser â†’ Admin â†’ Field Staff
2. **Decorator-Based Security:** Custom decorators enforce authorization
3. **Comprehensive Audit Trail:** All critical actions logged with context
4. **Mobile Integration:** Separate authentication flow for mobile app
5. **Password Security:** Strength validation and secure reset process
6. **Session Management:** Proper tracking and cleanup

### For Thesis Defense:

- Explain the authorization flowcharts (Section 4)
- Demonstrate role-based access control (Section 5)
- Show security decorator implementation (Section 6)
- Present audit trail capabilities (Section 7)
- Discuss password security measures (Section 8)

---

**End of Document**
